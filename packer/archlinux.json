{
	"builders": [{
	  "type": "virtualbox-iso",
	  "guest_os_type": "ArchLinux_64",
	  "iso_url": "https://mirrors.lug.mtu.edu/archlinux/iso/2018.03.01/archlinux-2018.03.01-x86_64.iso",
	  "iso_checksum": "bfe1c58cd4396ffd5826ae5a2d71f45f873428be",
	  "iso_checksum_type": "sha1",
	  "ssh_username": "root",
	  "ssh_password": "thisISaSECUREpassword12",
	  "shutdown_command": "echo 'packer' | sudo -S shutdown -P now",
	  "hard_drive_interface": "sata",
	  "iso_interface": "sata",
      "guest_additions_mode": "disable",
      "headless": true,
      "boot_wait": "3s",
      "boot_command": [
		"<tab> cow_spacesize=2G <enter>",
        "<wait10><wait10>",
        "echo 'root:thisISaSECUREpassword12' | chpasswd <enter>",
        "systemctl start sshd <enter>"
      ],
      "vboxmanage": [
        ["modifyvm", "{{.Name}}", "--memory", "4096"],
        ["modifyvm", "{{.Name}}", "--cpus", "2"]
      ]
	}],
    "provisioners": [
      {
        "type": "shell",
        "inline": [
          "echo 'Server = https://mirror.wdc1.us.leaseweb.net/archlinux/$repo/os/$arch' > /etc/pacman.d/mirrorlist",
          "pacman -Sy ansible --noconfirm --noprogressbar --needed"
        ]
      },
      {
        "type": "ansible-local",
        "playbook_file": "provisioning/bootstrap.yml",
        "extra_arguments": [ "--diff -vv" ]
      },
      {
        "type": "ansible-local",
        "playbook_file": "provisioning/configure.yml",
        "playbook_dir": "provisioning",
        "extra_arguments": [ "--diff -vv" ]
      }
    ],
  "post-processors": [
    {
      "type": "checksum",
      "checksum_types": ["sha256"],
      "output": "archlinux.box.checksum"
    },
    {
      "type": "vagrant",
      "output": "archlinux.box",
      "keep_input_artifact": false
    }
  ]
}
